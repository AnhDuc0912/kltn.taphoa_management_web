# routes/dashboard.py
from flask import Blueprint, render_template
from services.db_utils import q

bp = Blueprint("dashboard_bp", __name__)

@bp.get("/", endpoint="dashboard")
def dashboard():
    brand_cnt = q("SELECT COUNT(*) FROM brands", fetch="one")[0]
    cat_cnt   = q("SELECT COUNT(*) FROM categories", fetch="one")[0]
    sku_cnt   = q("SELECT COUNT(*) FROM skus", fetch="one")[0]
    img_cnt   = q("SELECT COUNT(*) FROM sku_images", fetch="one")[0]
    return render_template("dashboard.html",
                           brand_cnt=brand_cnt, cat_cnt=cat_cnt, sku_cnt=sku_cnt, img_cnt=img_cnt)
