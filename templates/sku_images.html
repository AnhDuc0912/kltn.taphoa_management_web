{% extends "_base.html" %}
{% block body %}
<h4>Ảnh SKU #{{sku[0]}} — {{sku[1]}}</h4>
<form class="row g-2 mb-3" method="post" enctype="multipart/form-data" action="{{ url_for('sku_image_add', sku_id=sku[0]) }}">
  <div class="col-auto"><input class="form-control" type="file" name="image" required></div>
  <div class="col-auto form-check">
    <input class="form-check-input" type="checkbox" name="is_primary" value="1" id="p"><label for="p" class="form-check-label">Đặt ảnh chính</label>
  </div>
  <div class="col-auto"><button class="btn btn-primary">Tải lên</button></div>
</form>
<div class="row g-3">
  {% for id, path, is_primary in imgs %}
  <div class="col-6 col-md-3">
    <div class="card">
      <img class="card-img-top" src="{{ url_for('serve_upload', filename=path.split('/')[-1]) }}">
      <div class="card-body d-flex gap-2">
        {% if not is_primary %}
        <form method="post" action="{{ url_for('sku_image_set_primary', sku_id=sku[0], img_id=id) }}">
          <button class="btn btn-sm btn-outline-secondary">Đặt chính</button>
        </form>
        {% else %}
          <span class="badge text-bg-success">Ảnh chính</span>
        {% endif %}
        <form method="post" action="{{ url_for('sku_image_delete', sku_id=sku[0], img_id=id) }}" onsubmit="return confirm('Xoá ảnh?')">
          <button class="btn btn-sm btn-outline-danger">Xoá</button>
        </form>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
